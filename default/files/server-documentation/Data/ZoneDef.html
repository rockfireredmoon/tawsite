<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Reference: ZoneDef.txt</title>
<link rel="stylesheet" type="text/css" href="../main.css">
</head>
<body>

<div>

<h2>Reference: ZoneDef.txt</h2>

<div class="spacer"></div>
<h2>Purpose</h2>
Contains zone information for all default zones.  These include official overworld and dungeon zones, as well as some development areas.
<p>
Note: Player groves start at Zone ID 5000 and are not included in this list.  Accounts without the special <b>debug</b> permission may not use the build tool in any IDs below 5000.  This helps to prevent some exploits during gameplay.

<div class="spacer"></div>
<h2>ZoneDef folder</h2>
This same block format is used for grove entries present in the <b>ZoneDef</b> subfolder.  Unlike the master file (ZoneDef.txt) which contains all the official gameplay zones, the grove entries are kept isolated from each other for easier editing.

<div class="spacer"></div>
<h2>File Format</h2>
Resembles INI format with structured blocks.<br>
Comment character: semicolon (;)<br>
Each line is split into a key=value pair on the first "=" symbol.



<div class="spacer"></div>
<h2>Block Format</h2>

<table frame=box rules=all>
  <tr class="header">
    <td><b>Property</b></td>
    <td><b>Type</b></td>
    <td><b>Description</b></td>
  </tr>
  <tr>
    <td>[ENTRY]</td>
    <td>N/A</td>
    <td>Begins a new entry.</td>
  </tr>
  <tr>
    <td>ID</td>
    <td>Integer</td>
    <td>The ID of the zone.  This is used as a key into the table.  Must be unique.</td>
  </tr>
  <tr>
    <td>ACCOUNTID</td>
    <td>Integer</td>
    <td>For groves, this is the Account ID who owns the zone.  The owner is free to perform all grove editing functions.  There may only be one owner.</td>
  </tr>
  <tr>
    <td>DESC</td>
    <td>String</td>
    <td>Description.  Has no effect on the client or server.  It merely serves as a sort of comment field which is preserved in data autosaves.</td>
  </tr>
  <tr>
    <td>NAME</td>
    <td>String</td>
    <td>The name of the zone.  This is used in the client for players to identify the location.</td>
  </tr>
  <tr>
    <td>TERRAINCONFIG</td>
    <td>String</td>
    <td>Required by the client.  This indicates the terrain template to use.</td>
  </tr>
  <tr>
    <td>ENVIRONMENTTYPE</td>
    <td>String</td>
    <td>The default environment type loaded by the client.</td>
  </tr>
  <tr>
    <td>MAPNAME</td>
    <td>String</td>
    <td>The map resource loaded by the client for browsing the world map.</td>
  </tr>
  <tr>
    <td>REGIONS</td>
    <td>String</td>
    <td>Not used.  A secondary client map resource that attempts to define locations by a color map.</td>
  </tr>
  <tr>
    <td>ShardName</td>
    <td>String</td>
    <td>This is the name that appears in parenthesis in the space above the client minimap.  The server does not actually have shards.</td>
  </tr>
  <tr>
    <td>GroveName</td>
    <td>String</td>
    <td>When players create accounts, this is the grove name that has been chosen.  It must be unique.</td>
  </tr>
  <tr>
    <td>WarpName</td>
    <td>String</td>
    <td>This is the exact grove name used for warp commands.</td>
  </tr>
  <tr>
    <td>PageSize</td>
    <td>Integer</td>
    <td>Scenery tiles will be this many units across.  Do not change the page size when there are any existing scenery tiles, or it may cause problems where the correct tiles will not be loaded.  This is distinct from terrain tiles, which are always 1920 units wide.  Official zones often use smaller tile sizes, presumably to reduce the amount of scenery in a particular tile and improve data fetch times.</td>
  </tr>
  <tr>
    <td>MaxAggroRange</td>
    <td>Integer</td>
    <td>If present, this value can be used to enforce an upper limit to the global creature aggro range, specific to that instance.  This is expressed in map units.  10 units = 1 meter.</td>
  </tr>
  <tr>
    <td>MaxLeashRange</td>
    <td>Integer</td>
    <td>If present, this value can be used to enforce an upper limit to the global creature leash range, specific to that instance.  The leash range is the maximum tether distance that a creature may stray or attack around its spawn point.  This is expressed in map units.  10 units = 1 meter.  The default is 500.</td>
  </tr>
  <tr>
    <td>DefLoc</td>
    <td>Int,Int,Int</td>
    <td>Three integers, separated by commas.  These represent the default X,Y,Z coordinates that players will appear when they are warped into a zone.</td>
  </tr>
  <tr>
    <td>Persist</td>
    <td>Bool</td>
    <td>Not recommended for use.  If set to 1, instances will not be unloaded even if there are no players in them.  Default value is false.</td>
  </tr>
  <tr>
    <td>Instance</td>
    <td>Bool</td>
    <td>If set to 1, this zone is instanced.  Players not in a party will spawn into separate instances.  This is also used internally by the server to determine if the zone should behave as a dungeon.</td>
  </tr>
  <tr>
    <td>Grove</td>
    <td>Bool</td>
    <td>If set to 1, this zone is considered a grove, and has some modified rules for warping.  Groves are typically public-access zones that can be freely warped to if the player is at a sanctuary, or in a grove.  Positional warping is also freely enabled within zones.  User generated groves start at zone ID 5000.  Due to client safeguards, standard players are not able to access the build tool if their zone ID is below that.</td>
  </tr>
  <tr>
    <td>Arena</td>
    <td>Bool</td>
    <td>If set to 1, this zone will appear in the PvP arena list.  Arenas also have slightly altered warp rules, as players are freely able to enter them from sanctuary locations.</td>
  </tr>
  <tr>
    <td>Audit</td>
    <td>Bool</td>
    <td>If set to 1, scenery edits in this zone will be audited (saved to a log file).  By default this applies to all zones under ID 5000, since they are not expected to be groves.<p>For audits to work, make sure <span class="script">SceneryAuditAllow</span> is enabled in <a href="../ServerConfig.html">ServerConfig.txt</a>.</td>
  </tr>
  <tr>
    <td>DropRateProfile</td>
    <td>String</td>
    <td>The drop rate profile to use for this instance.  If not specified, <span class="string">instance</span> will be used for all zones where <span class="script">Instance=1</span>, and <span class="string">standard</span> for otherwise.  If this value is custom set, it will override the default.  In this case, make sure there is a matching profile name in <a href="DropRateProfile.html">DropRateProfile.txt</a>.</td>
  </tr>
  <tr>
    <td>EnvironmentCycle</td>
    <td>Bool</td>
    <td>If set to 1, players in this zone will see daylight cycling.  There is a single server-wide daylight cycle that affects all zones with this flag.  See the <span class="script">EnvironmentCycle</span> field in <a href="../ServerConfig.html">ServerConfig.txt</a> to change the actual daylight modes and cycle times.</td>
  </tr>
  <tr>
    <td>PlayerFilterType</td>
    <td>Integer</td>
    <td>Specifies a filter mode to allow or deny players from warping.  The following modes are provided: (0=None, 1=Whitelist, 2=Blacklist)</td>
  </tr>
  <tr>
    <td>PlayerFilterID</td>
    <td>Integer List</td>
    <td>A list of integers, separated by commas.  Each integer specifies the CreatureDef ID of a <b>player</b> that will be allowed or blocked based on the PlayerFilterType setting.  For a whitelist, only players on the list will be allowed to enter.  For a blacklist, only the players on the list will be blocked.  This field adds IDs into a list.  Use may optionally use this field on multiple lines to add more entries.</td>
  </tr>
  <tr>
    <td>BuildPermission</td>
    <td>String</td>
    <td>A list of 5 integers, separated by a comma, and applied as a single configuration string.  This allows zones to contain edit permissions for other players, separate from account permissions.  The properties within this string can be described in the following way:<br>CDef,X1,Y1,X2,Y2<p>Where CDef is the CreatureDef ID of a <b>player</b> character.  The others are coordinates of the top left and bottom right corners of a bounding box.  These coordinates are expressed as scenery tile coordinates (see <span class="script">PageSize</span>), not terrain tiles, and not world map units.  Since this field only adds a single permission, you may use this field on multiple lines for more entries.</td>
  </tr>
</table>

<div class="footer"></div>

</div>
</body>
</html>
